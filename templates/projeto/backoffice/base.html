<!DOCTYPE html>
<html lang="pt-br">

{% load static %}
{% load humanize %}

<head>
    <base href="./">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0">
    {# Esse bloco sempre deve ser sobrescrito pelo módolo que o implementa #}
    <title>{% block titulo %}Base Geral{% endblock %}</title>
    <link rel="icon" href="{% static 'img/icons/lucas.ico' %}"/>

    <!-- Css Font awesome -->
    <link rel="stylesheet" href="{% static 'font-awesome/css/font-awesome.css' %}">
    <link rel="stylesheet" href="{% static 'fonts/devextreme/' %}">

    <!-- Css do componente Select2 -->
    <link rel="stylesheet" href="{% static 'select2/css/select2.css' %}">

    <!-- Ícones -->
    <link rel="stylesheet" href="{% static 'css/fontface/icone_pin/icone_menu/icons_menu.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontface/icone_pin/icons_lucas.css' %}">

    <!-- Css OWL Carousel -->
    <link rel="stylesheet" href="{% static 'OwlCarousel2-2.3.4/dist/assets/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'OwlCarousel2-2.3.4/dist/assets/owl.theme.default.min.css' %}">

    <!-- Css Booststrap -->
    <link rel="stylesheet" href="{% static 'bootstrap-4.4.1/dist/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static '@coreui/coreui-pro/dist/css/coreui-pro.min.css' %}">

    <!-- Cores utilizadas no projeto -->
    <link rel="stylesheet" href="{% static 'css/cores.css' %}">

    <!-- Quatro menus principais -->
    <link rel="stylesheet" href="{% static 'css/quatro_menus.css' %}">


    {% block css_tabela %}
        <!-- Css tabelas -->
        <link rel="stylesheet" href="{% static 'devextreme/css/datatables.min.css' %}">
    {% endblock %}

    <!-- Toastr, Alerta de sucesso ou error css -->
    <link rel="stylesheet" href="{% static 'toastr/css/toastr.css' %}">

    <!-- datepicker -->
    <link rel="stylesheet" href="{% static 'datepicker/css/datepicker.min.css' %}">
    <link rel="stylesheet" href="{% static 'filepond/filepond.css' %}">
    <link rel="stylesheet" href="{% static 'filepond/filepond-plugin-image-preview.css' %}">
    <!-- Styles -->

    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    {% block css %}
    {% endblock %}

    {% block tag_google_manager_header %}{% endblock tag_google_manager_header %}
    {% block tag_google_analytics %}{% endblock tag_google_analytics %}

</head><!-- head -->


<body class="app header-fixed sidebar-minimized aside-menu-minimized sidebar-lg-show">
{% block tag_google_manager_body %}{% endblock tag_google_manager_body %}
<!-- Div que possui o css para carregamento da página -->

{% block loader %}
    <div class="loaderBase"></div>
{% endblock %}



{% block app_alertas %}

{% endblock %}

{% block menu_superior %}

{% endblock %}

{% block app_body %}
    {% block app_header %}
        <header class="app-header navbar bg-whiter">

            <button class="c-header-toggler c-class-toggler d-lg-none m-0" type="button" data-target="#sidebar" data-class="c-sidebar-show">
                <span class="navbar-toggler-icon"></span>
            </button>

            <button class="c-header-toggler c-class-toggler m-0 d-md-down-none" type="button" data-target="#sidebar" data-class="c-sidebar-lg-show" responsive="true">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Fim dos botões abre e fecha menu esquerdo. -->

            {% block logo %}

            {% endblock %}
            <!--Block para o breaking news desktop, breaking_news_mobile é o block para o mobile, esta acima do block banner-->

            {% block breaking_news %}
                <div class="marquee">
                    <div class="w-100 mx-3 mt-2 breaking_news_lg">
                        <div class="breaking_news font-weight-semibold font-lg">
                            {% if mostrar_breakingnews %}
                                <img src="{% static 'fornecedor/img/icons/icon_breaking-news.svg' %}" width="30" class="mr-2">
                                <span name="msg_breaking_news">
                                    {{ last_breakingnews.mensagem|safe }}
                                </span>
                            {% endif %}
                            <!-- <img src="{% static 'fornecedor/img/icons/icon_edit-breakingnews.svg' %}" class="cursor-pointer" width="30" class="ml-2" data-toggle="modal" data-target="#modal_editar_breaking_news"> -->
                        </div>
                    </div>
                </div>
            {% endblock %}


            {% block menu_topo_direito %}
                <!-- Início ícone no menu de aplicativos do sistema -->
                <a href="#" class="mr-2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="{% block icone_menu_topo %}{% static 'img/menus/icon_collapse-menu.svg' %}{% endblock %}" alt="Ícone menuzinho" width="30">
                </a>
                <!-- Fim Ícone no menu de aplicativos do sistema -->

                <!-- Conteúdo no menu de aplicativos do sistema -->
                <div class="dropdown-menu dropdown-menu-right mr-4">
                    <div class="d-flex flex-wrap justify-content-around">
                        <a href="https://pin.drogariasnissei.com.br/" class="dropdown-submenu dropdown-submenu-indicadores">
                            PIN Indicadores
                        </a>
                        <a href="http://vendamais.nisseilabs.com.br" class="dropdown-submenu dropdown-submenu-vendamais">
                            PIN Venda+
                        </a>
                        <a href="https://fornecedor.nisseisa.com.br/" class="dropdown-submenu dropdown-submenu-fornecedor">
                            PIN Fornecedores
                        </a>
                        <a href="https://www.farmaciasnissei.com.br/" class="dropdown-submenu dropdown-submenu-ecommerce">
                            E-commerce
                        </a>
                    </div><!-- .d-flex -->
                    <div class="d-flex flex-wrap justify-content-around">
                        <a href="https://bi.drogariasnissei.com.br:8080/BOE/BI" target="_blank" class="dropdown-submenu dropdown-submenu-sapbo">
                            SAP BO
                        </a>
                        <a href="https://pin.drogariasnissei.com.br/pin/login/" class="dropdown-submenu dropdown-submenu-suporte">
                            Suporte
                        </a>
                        <a href="https://memed.com.br/receita/login" target="_blank" class="dropdown-submenu dropdown-submenu-memed">
                            Memed
                        </a>
                        <a href="https://universidade.nisseilabs.com.br/" target="_blank" id="btn-universidade-moodle" class="dropdown-submenu dropdown-submenu-universidade">
                            Universidade
                        </a>
                    </div><!-- .d-flex -->
                </div>
            {% endblock %}
            <!-- Conteúdo no menu de aplicativos do sistema -->

            <!--Comunicados-->
            {% if 'acessar_comunicados' in request.session.usr_info.pt_funcao %}
                <div>
                    <ul class="nav navbar-nav">
                        <li class="nav-item dropdown">
                            <a class="nav-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                               aria-expanded="false">
                                <img src="{% static 'img/menus/menu-left-icon_comunicados.svg' %}" alt="Ícone comunicados" width="60">
                                <div id="qtd_msg">
                                    {% if qtd_msg_naolidas > 0 %}
                                        <span class="badge badge-pill badge-info"> {{ qtd_msg_naolidas }} </span>
                                    {% endif %}
                                </div>

                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-notificacao dropdown-menu-lg" id="div_com_notifications">
                                <div class="dropdown-header-notificacao dropdown-header text-center">
                                    <div id="info_qtd_msg">
                                        {% if qtd_msg_naolidas == 0 %}
                                            <strong>Você não tem novas mensagens</strong>
                                        {% elif qtd_msg_naolidas == 1 %}
                                            <strong>Você tem 1 mensagem não lida</strong>
                                        {% elif qtd_msg_naolidas > 1 %}
                                            <strong>Você tem {{ qtd_msg_naolidas }} mensagens não lidas</strong>
                                        {% endif %}
                                    </div>
                                </div>
                                {% for msg_naolida in lista_msg_naolidas %}
                                    <a class="dropdown-item dropdown-item-notificacao" href="/comunicados/feed/msg/{{ msg_naolida.com_id }}">
                                        <div class="d-flex align-items-center justify-content-center small w-100">
                                            <div class="mr-2">
                                                <img src="{{ msg_naolida.user_from_photo }}" alt="Foto perfil"
                                                     class="rounded-circle w-30px h-30px">
                                            </div>

                                            <div class="w-100">
                                                <div class="d-flex justify-content-between align-items-center mb-1 w-100">
                                                    <div>
                                                        <p class="font-weight-semibold text-center">
                                                            {{ msg_naolida.user_from_fullname|title }}
                                                        </p>
                                                    </div>

                                                </div>

                                                <div class="w-100">
                                                    <p class="text-center">
                                                        <span class="text-muted">
                                                            Postou em:
                                                        </span>
                                                        {{ msg_naolida.com_pg }}
                                                    </p>
                                                </div>

                                                <div>
                                                    <p class="small text-muted text-center">{{ msg_naolida.dt_envio|naturaltime }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </a>

                                {% endfor %}
                                <a class="dropdown-item d-flex justify-content-center" href="{% url 'core:comunicacao:comunicados:feed' %}"><strong>Ir para os comunicados</strong></a>
                            </div>
                        </li>
                    </ul>
                </div>
            {% endif %}
            <!--Fim block comunicado-->


            <!--Notifiações Processos-->
            {% if 'acessar_processos_colaboradores' in request.session.usr_info.pt_funcao %}
                <div>
                    <ul class="nav navbar-nav">
                        <li class="nav-item dropdown">
                            <a class="nav-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                               aria-expanded="false" id="btn-notificacoes-processos">
                                <img src="{% static 'img/menus/menu-left-icon_notification.svg' %}"
                                     alt="Ícone notificação processos" width="65">


                                <div id="qtd_msg">
                                    {% if processos_abertos %}
                                        <span class="badge badge-pill badge-info"> {{ total_processos }} </span>
                                    {% endif %}
                                </div>

                            </a>
                        </li>
                    </ul>
                </div>
            {% endif %}


            <!-- Início dos botões abre e fecha menu direito -->
            <div class="bloco-user d-flex" style="align-items: center;">
                {% block modal_usuarios %}
                    {% if request.session.usr_info.perfil_principal == 'loja' %}
                        <div class="cursor-pointer rounded p-1 border border-light mr-3 d-none" data-target="user_separador_atual" onclick="abrirModalAtualizacaoUsuario()">
                            <span class="mr-2"><span class="small" data-target="matricula_user_separador"></span> - <span class="small" data-target="nome_user_separador"></span></span>
                            <img data-target="photo_user_separador" class="img-avatar rounded-circle" src="" alt="" width="35" height="35">
                        </div>
                    {% endif %}
                {% endblock %}

                <!-- Foto do usuário -->
                <button class="navbar-toggler aside-menu-toggler d-md-down-none" type="button" data-toggle="aside-menu-lg-show">
                    <img id="avatar1" class="img-avatar rounded-circle" src="{% block imagem_usuario %}{{ request.user.funcionario.imagem.url }}{% endblock %}" alt="photo" width="40" height="40">
                </button>
                <!-- Abre -->
                <button id="btn_Abre_Menu_Direito" class="navbar-toggler aside-menu-toggler d-lg-none" type="button" data-toggle="aside-menu-show">
                    <img id="avatar2" class="img-avatar rounded-circle" src="{% block imagem_usuario_mobile %}{{ request.user.funcionario.imagem.url }}{% endblock %}" alt="photo" width="40" height="40">
                </button>
                <!-- Fim Foto do usuário -->
            </div>
            <!-- Fim dos botões abre e fecha menu direito -->


        </header>

        {% block menu_esquerdo %}
            <div class="c-sidebar bg-white c-sidebar-fixed c-sidebar-lg-show c-sidebar-unfoldable" id="sidebar">
                <ul class="c-sidebar-nav">
                    <li class="c-sidebar-nav-dropdown">
                        <a class="c-sidebar-nav-dropdown-toggle" href="#">
                            <div class="c-sidebar-nav-icon nav-icon icon-icons_pin_menu-dashboard font-2xl">

                            </div>
                            <span class="nav-text font-weight-semibold">Financeiro</span>
                        </a>
                        <ul class="c-sidebar-nav-dropdown-items">
                            <li class="c-sidebar-nav-item">
                                <a id="link_horahora" class="c-sidebar-nav-link" href="{% url 'finance:home' %}">
                                    <div class="c-sidebar-nav-icon nav-icon font-2x1">
                                        <img style="width: 25px" src="{% static 'indicadores/img/menus/menu-left-icon_hora-a-hora.svg' %}" alt="" srcset="" class="">
                                    </div>
                                    <span class="nav-text" id="menuEsquerdoHH">Home</span>
                                </a>
                            </li>
                        </ul>
                        <ul class="c-sidebar-nav-dropdown-items">
                            <li class="c-sidebar-nav-item">
                                <a id="link_horahora" class="c-sidebar-nav-link" href="{% url 'finance:configuracoes' %}">
                                    <div class="c-sidebar-nav-icon nav-icon font-2x1">
                                        <img style="width: 25px" src="{% static 'indicadores/img/menus/menu-left-icon_hora-a-hora.svg' %}" alt="" srcset="" class="">
                                    </div>
                                    <span class="nav-text" id="menuEsquerdoHH">Configurações</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="c-sidebar-nav-dropdown">
                        <a class="c-sidebar-nav-dropdown-toggle" href="#">
                            <div class="c-sidebar-nav-icon nav-icon icon-icons_pin_menu-dashboard font-2xl">

                            </div>
                            <span class="nav-text font-weight-semibold">Bibliteca</span>
                        </a>
                        <ul class="c-sidebar-nav-dropdown-items">
                            <li class="c-sidebar-nav-item">
                                <a id="link_horahora" class="c-sidebar-nav-link" href="{% url 'library:home' %}">
                                    <div class="c-sidebar-nav-icon nav-icon font-2x1">
                                        <img style="width: 25px" src="{% static 'indicadores/img/menus/menu-left-icon_hora-a-hora.svg' %}" alt="" srcset="" class="">
                                    </div>
                                    <span class="nav-text" id="menuEsquerdoHH">Home</span>
                                </a>
                            </li>
                        </ul>
                        <ul class="c-sidebar-nav-dropdown-items">
                            <li class="c-sidebar-nav-item">
                                <a id="link_horahora" class="c-sidebar-nav-link" href="{% url 'library:settings' %}">
                                    <div class="c-sidebar-nav-icon nav-icon font-2x1">
                                        <img style="width: 25px" src="{% static 'indicadores/img/menus/menu-left-icon_hora-a-hora.svg' %}" alt="" srcset="" class="">
                                    </div>
                                    <span class="nav-text" id="menuEsquerdoHH">Cadastros</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="c-sidebar-nav-item">
                        <a class="c-sidebar-nav-link" href="#">
                            <span class="c-sidebar-nav-icon nav-icon icon-icons_pin_menu-home font-2xl"></span>
                            <span class="nav-text font-weight-semibold">Aviação</span>
                        </a>
                    </li>
                </ul>
                <button class="c-sidebar-minimizer" data-expand="false" type="button">
                </button>
            </div>
        {% endblock %}
    {% endblock %}

    <div class="c-wrapper">
    <div class="app-body">
        {% block breadcrumb %}
        {% endblock %}
        <main class="main">
            <div class="container-fluid">
                <!--Block para o breaking news mobile, breaking_news é o block para o desktop-->
                {% block breaking_news_mobile %}
                {% endblock %}

                {% block banner %}
                {% endblock %}

                {% block combo_boxes %}
                {% endblock %}


                {% block cabecalho %}

                {% endblock %}
            </div>

            {% block main %}
            {% endblock %}

            <!-- Modal confirmação -->
            <div class="modal modal-sem-scroll" id="modal_confirmacao" tabindex="-1" data-backdrop="true" role="dialog" aria-labelledby="modal_confirmacao" aria-hidden="true">
                <div class="modal-dialog modal-md" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title "
                                id="exampleModalLongTitle"></h5>
                            <a class="icon_close p-1" data-dismiss="modal" aria-label="Close"></a>
                        </div>
                        <div class="modal-body text-center">
                            <p class="font-lg messageBody"></p>
                            <p class="text-muted messageMuted">Não será mais possível recupera-lo.</p>
                        </div>
                        <div class="modal-footer float-right">
                            <a class="btn btn-danger text-white seletorBtnAcao" tabindex="0">Excluir</a>
                            <a class="btn btn-outline-light" type="button" tabindex="0" data-dismiss="modal">Cancelar</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal alerta conteúdo não salvo -->
            <div class="modal modal-sem-scroll" id="modal_alerta" tabindex="0" role="dialog" data-backdrop="true" aria-labelledby="modal_alerta" aria-hidden="false">
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                    <div class="modal-content border-0">
                        <div class="modal-header">
                            <h5 class="modal-title font-weight-normal" id="exampleModalLongTitle">Deseja salvar as alterações feitas?</h5>
                            <a class="icon_close p-1" data-dismiss="modal" aria-label="Close"></a>
                        </div>
                        <div class="modal-body text-center">
                            <p class="font-lg messageBody">Seu conteúdo será perdido ao fechar esta janela</p>
                            <p class="text-muted">Não será mais possível recupera-lo.</p>
                        </div>
                        <div class="container-fluid border-top border-light">
                            <div class="mt-1 mb-2">
                                <div class="row pr-2 pl-2 d-flex justify-content-between align-items-center flex-wrap">
                                    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12 mt-1"></div>
                                    <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12 mt-1">
                                        <div class="d-flex flex-nowrap btnsAcao">
                                            <a class="btn btn-primary w-100 text-white mr-1 px-3 seletorBtnSalvar" tabindex="0">Salvar</a>
                                            <a class="btn btn-outline-secondary w-100 mr-1 px-3" data-dismiss="modal" tabindex="0">Cancelar</a>
                                            <a class="btn btn-danger w-100 text-white mr-1 px-3 seletorBtnNaoSalvar" tabindex="0">Não Salvar</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Alteração de usuário -->
            <div class="modal fade  modal-padrao-cadastros-modal modal-sem-scroll" id="modalAtualizarUsuario" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="exampleModalLongTitle"
                 aria-hidden="false">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Alteração de usuário</h5>
                        </div>

                        <div class="modal-body">
                            <p class="mb-4s">
                                Por favor, escolha o seu usuário.
                            </p>
                            <div data-target="template_funcionario_loja" class="d-none">
                                <a class="cusror-pointer list-group-item border-0 list-group-item-action">
                                    <input type="radio" class="d-none" name="usuario_ativo" data-target="usr_id" value="">
                                    <div class="d-flex">
                                        <img src="" alt="User picture profile" data-target="usr__photo" class="rounded-circle mr-3"
                                             style="max-width:50px;min-width:50px;max-height:50px;min-height:50px;" width="50">
                                        <div>
                                            <p class="font-weight-semibold"><span data-target="usr__matricula_id"></span> - <span data-target="usr__nm_completo"></span></p>
                                            <p class="small text-uppercase text-muted"><span data-target="usr__nm_cargo"></span></p>
                                        </div>
                                    </div>
                                </a>
                            </div>

                            <div data-target="funcionarios_lista" class="list-group">

                            </div>
                        </div>
                        <div class="modal-footer">
                        </div>
                    </div>
                </div>
            </div><!-- Modal Atualização de usuário -->

            <!-- Modal Versão atual -->
            <div class="modal fade" id="modalVersaoAtual" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">

                            <h5 class="modal-title" id="exampleModalLongTitle">Versão {{ versao_atual.codigo }}</h5>
                            <button type="button" class="close-modal" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>

                        <div class="modal-body">
                            {% if versao_atual.descricao != None %}
                                <p>{{ versao_atual.descricao }}</p>
                                <hr>
                            {% endif %}

                            <h5 class="text-left font-weight-normal mt-2 text-body">Detalhes da atualização</h5>
                            <br>
                            <ul class="list-group">

                                {% for item in versao_atual_itens %}
                                    <li>- {{ item.descricao }}{% if forloop.last %}.{% else %};{% endif %}</li>
                                {% endfor %}
                            </ul>

                        </div>
                        <div class="modal-footer d-flex justify-content-between align-content-center">
                            {#                            <a href="{% url 'core.versoes' %}">#}
                            <a href="#">
                                Ir para todas as versões
                            </a>
                            <a class="btn btn-outline-light mr-2"
                               data-dismiss="modal">Fechar essa janela
                            </a>
                        </div>
                    </div>
                </div>
            </div><!-- Modal versão PIN -->

        </main>

        {% block menu_direito %}
            <aside class="aside-menu">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" tabindex="-1" data-toggle="tab" href="#loja" role="tab">
                            <span class="icon_add-store font-2xl"></span>
                        </a>
                    </li>
                    {% if 'acessar_pg_dev' in request.session.usr_info.pt_funcao %}
                        <li class="nav-item">
                            <a tabindex="-1" class="nav-link" data-toggle="tab" href="#" role="tab">
                                <span class="icon_brand font-2xl"></span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
                <!-- Tab panes-->

                <div class="tab-content container-fluid">
                    <div class="tab-pane active" id="loja" role="tabpanel">
                        <!-- Dados da loja -->
                        {% if 'acessar_pg_dev' in request.session.usr_info.pt_funcao %}
                            <div class="mt-2">
                                <span class="text-uppercase font-weight-semibold">Dados 1:</span>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>

                            <div class="mt-2">
                                <span class="text-uppercase font-weight-semibold">Dados 2:</span>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>

                            <div class="mt-2">
                                <span class="text-uppercase font-weight-semibold">Dados 3:</span>
                                <div class="progress">
                                    <div class="progress-bar  bg-success" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        {% endif %}
                    </div><!-- .tab-pane -->
                    {% if 'acessar_configuracoes_vendamais' in request.session.usr_info.pt_funcao %}
                        <p class="small text-muted text-uppercase font-weight-bold mt-4 mb-2">
                            {#                            <a tabindex="-1" href="{% url 'core.dev' %}" class="text-black-50">#}
                            <a tabindex="-1" href="#" class="text-black-50">
                                <span>Configurações</span>
                            </a>
                        </p>
                    {% endif %}
                    <p class="small text-muted text-uppercase font-weight-bold mt-4 mb-2">
                        {#                        <a tabindex="-1" href="{% block url_logout %}{% url 'vendamais:logout' %}{% endblock %}">#}
                        <a tabindex="-1" href="{% block url_logout %}#{% endblock %}">
                            <span>Sair</span>
                        </a>
                    </p>
                </div>


            </aside>
        {% endblock %}

    </div>
{% endblock %}

{% block app_footer %}
    <footer class="app-footer">
        <div class="d-flex justify-content-between align-items-center">
            <div></div>

            <!-- Logo Inteliger -->
            <div class="d-flex align-items-center">
                <a target="_blank" class="small text-muted">Powered by</a>
                <a href="" target="_blank">
                    <img src="{% static 'img/logos/logo_lucas.svg' %}" alt="Logo Lucas" width="80">
                </a>
            </div>

            <!-- Link versão -->
            <div class="align-middle">
                <a href="#" class="small text-muted" data-toggle="modal" data-target="#modalVersaoAtual">
                    Versão {{ versao_atual.codigo }}
                </a>
            </div>
        </div>
    </footer>
{% endblock %}
</div>

{% block modals %}
{% endblock %}

<!-- Jquery v3.5.1 -->
<script type="text/javascript" src="{% static 'js/jquery/js/jquery_3.5.1v.min.js' %}"></script>
<script src="{% static 'js/utilitarios/jquery.inputmask.bundle.min.js' %}"></script>

<!-- Jquery UI -->
<script type="text/javascript" src="{% static 'js/jquery/js/jquery-ui.min.js' %}"></script>

<!-- Loader js -->
<script type="text/javascript" src="{% static 'js/util/loader.js' %}"></script>

{% block importacoes_js %}
    <!-- DateTime functions -->
    <script src="{% static 'js/util/DateTime.js' %}"></script>

    <!-- Toastr, alertas de sucesso e erros JS -->
    <script type="text/javascript" src="{% static 'toastr/js/toastr.js' %}"></script>

    <!-- Popper js -->
    <script type="text/javascript" src="{% static 'js/popper/js/popper.min.js' %}"></script>

    <!-- coreui@ para ativar funcionalidade aos asidebar -->
    <script type="text/javascript" src="{% static '@coreui/coreui_pro2/coreui-pro/dist/js/coreui.bundle.min.js' %}"></script>
    <script type="text/javascript" src="{% static '@coreui/coreui-pro/dist/js/coreui.min.js' %}"></script>

    <!-- Bootstrap js -->
    <script type="text/javascript" src="{% static 'bootstrap-4.4.1/dist/js/bootstrap.min.js' %}"></script>

    <!-- select2 js -->
    <script type="text/javascript" src="{% static 'select2/js/select2.min.js' %}"></script>

    <!-- Máscaras do jquery com regexp -->
    <script type="text/javascript" src="{% static 'js/utilitarios/mascara/mask.js' %}"></script>

    <!-- Javascript para exportação de arquivos -->
    <script type="text/javascript" src="{% static 'js/utilitarios/exportar/jszip.js' %}"></script>

    <!-- Padronização do componente de tabelas -->
    <script type="text/javascript" src="{% static 'devextreme/js/padronizacao_tabelas.js' %}"></script>

    <!-- Componente de tabelas -->
    <script type="text/javascript" src="{% static 'devextreme/js/dx.all.js' %}"></script>
    <script src="{% static 'devextreme/js/localization/dx.messages.pt.js' %}"></script>

    <!-- Imprimir js -->
    <script type="text/javascript" src="{% static 'js/utilitarios/exportar_imprimir/print.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/utilitarios/exportar_imprimir/printThis.js' %}"></script>

    <!-- Exportar pdf js -->
    <script type="text/javascript" src="{% static 'js/utilitarios/exportar_pdf/pdf.min.js' %}"></script>

    <!-- Popover js -->
    <script type="text/javascript" src="{% static 'js/popover/popovers.js' %}"></script>

    <!-- Datepicker -->
    <script src="{% static 'datepicker/js/datepicker.min.js' %}"></script>

    <!-- Moment JS -->
    <script src="{% static 'js/utilitarios/moment/moment.min.js' %}"></script>

    <!-- Moneymask -->
    <script src="{% static 'js/jquery.moneymask.min.js' %}"></script>
    <script src="{% static 'js/jquery.mask.js' %}"></script>

    <!-- Global scripts -->
    {% include 'core/scripts/core.html' %}

{% endblock %}


{% block  breaking_news_marquee %}
    <script>
    {#    $('.breaking_news').marquee({#}
    {#        pauseOnHover: true,#}
    {#        duration: 10000,#}
    {#    })#}
    </script>
{% endblock breaking_news_marquee %}

<script>
    /**
     * Cria a mascara de dinheiro para a classe .currency
     */
    $(".currency").maskMoney({
            thousands: '',
            decimal: '.',
            allowZero: true,
            prefix: 'R$ ',
            allowEmpty: false,
            allowNegative: true,
            selectAllOnFocus: true
        }
    );

    DevExpress.localization.locale(navigator.language);

    /**
     * Exemplo de uso: "2020-05-28".formatarInputDate()
     * @return {string} "28/05/2020"
     */
    String.prototype.formatarInputDate = function () {
        if (this) {
            if (this.length === 10)
                if (this.indexOf('-') > -1)
                    if (this.split('-').length === 3) {
                        let formatado = this.split('-');
                        formatado = [formatado[2], formatado[1], formatado[0]];
                        formatado = formatado.join('/');
                        return formatado;
                    }
        } else
            return this;
    };


    /**
     * Exibindo erro ao console para visualizar a linha e o momento que foi alertado erro sem interromper a execução do JavaScript
     * @return {string}
     */
    function consoleLogErro(Erro) {
        console.groupCollapsed("Erro ao carregar dados, o campo será atribuído em string vazia ");
        console.error("Falta de dados em " + Erro);
        console.groupEnd();
        return "";
    }

    function formatarData(data, is_hr) {

        var date = new Date();
        var timeOffset = date.getTimezoneOffset() / 60;

        if (data && data.substring) {

            let ano = data.substring(0, 4);
            let mes = data.substring(5, 7);
            let dia = data.substring(8, 10);
            let hora = data.substring(11, 13);
            let minuto = data.substring(14, 16);

            let nova_data;
            if (hora && minuto) {
                nova_data = new Date(parseInt(ano), parseInt(mes) - 1, parseInt(dia), parseInt(hora) - timeOffset, parseInt(minuto));
            } else {
                nova_data = new Date(parseInt(ano), parseInt(mes) - 1, parseInt(dia));
            }

            let nova_data_dia = nova_data.getDate().toString().length === 1 ? '0' + nova_data.getDate().toString() : nova_data.getDate().toString();
            let nova_data_mes = (nova_data.getMonth() + 1).toString().length === 1 ? '0' + (nova_data.getMonth() + 1).toString() : (nova_data.getMonth() + 1).toString();
            let nova_data_ano = nova_data.getFullYear().toString().length === 1 ? '0' + nova_data.getFullYear().toString() : nova_data.getFullYear().toString();
            let nova_data_horas = nova_data.getHours().toString().length === 1 ? '0' + nova_data.getHours().toString() : nova_data.getHours().toString();
            let nova_data_minutos = nova_data.getMinutes().toString().length === 1 ? '0' + nova_data.getMinutes().toString() : nova_data.getMinutes().toString();

            if (!is_hr)
                return nova_data_dia + '/' + nova_data_mes + '/' + nova_data_ano + ' às ' + nova_data_horas + ":" + nova_data_minutos;
            else if (is_hr === "hora")
                return nova_data_horas + ":" + nova_data_minutos;
            else if (is_hr === "data")
                return nova_data_dia + '/' + nova_data_mes + '/' + nova_data_ano;
        } else
            return '';
    }

    $(".c-sidebar-minimizer").on('click', function (event) {

        $('.c-sidebar').toggleClass('c-sidebar-unfoldable');

    });

    // JAVASCRIPT HISTORY
    (function (history) {
        let pushState = history.pushState;
        history.pushState = function (state) {
            if (typeof history.onpushstate == "function") {
                history.onpushstate({state: state});
            } else {
                toastr.error('Você está realizando um método pushState(dados, "title") sem sobrescrever a função em "window.onpushstate".<br>É necessário tal ação para que seja feito atribuição aos campos do HTML de acordo com os dados visualizados pelo history', 'Error não sobreescreveu o window.onpushstate');
                load('off');
            }
            return pushState.apply(history, arguments);
        }
    })(window.history);
    // FIM JAVASCRIPT HISTORY

    $('select').each(function (index, element) {
        let parent = $(".app-body");
        if (element)
            $(element).select2({
                theme: "bootstrap",
                dropdownParent: parent,
            });
    });

    function validaCPF(strCPF) {
        let Soma;
        let Resto;
        Soma = 0;
        strCPF = strCPF.replace(/[^\d]+/g, '');
        if (strCPF === "00000000000" || strCPF === "11111111111" || strCPF === "22222222222" ||
            strCPF === "33333333333" || strCPF === "44444444444" || strCPF === "55555555555" ||
            strCPF === "66666666666" || strCPF === "77777777777" || strCPF === "88888888888" ||
            strCPF === "99999999999") {
            return false;
        }

        for (let i = 1; i <= 9; i++) {
            Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (11 - i);

            Resto = (Soma * 10) % 11;
        }
        if ((Resto === 10) || (Resto === 11)) {
            Resto = 0;
        }
        if (Resto !== parseInt(strCPF.substring(9, 10))) {
            return false;
        }

        Soma = 0;
        for (let i = 1; i <= 10; i++) {
            Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (12 - i);
            Resto = (Soma * 10) % 11;
        }
        if ((Resto === 10) || (Resto === 11)) {
            Resto = 0;
        }
        return Resto === parseInt(strCPF.substring(10, 11));

    }
</script>

<script>
    if (!String.prototype.slugify) {
        String.prototype.slugify = function () {

            return this.toString().toLowerCase()
                .replace(/[àÀáÁâÂãäÄÅåª]+/g, 'a')       // Special Characters #1
                .replace(/[èÈéÉêÊëË]+/g, 'e')        // Special Characters #2
                .replace(/[ìÌíÍîÎïÏ]+/g, 'i')        // Special Characters #3
                .replace(/[òÒóÓôÔõÕöÖº]+/g, 'o')        // Special Characters #4
                .replace(/[ùÙúÚûÛüÜ]+/g, 'u')        // Special Characters #5
                .replace(/[ýÝÿŸ]+/g, 'y')            // Special Characters #6
                .replace(/[ñÑ]+/g, 'n')                // Special Characters #7
                .replace(/[çÇ]+/g, 'c')                // Special Characters #8
                .replace(/[ß]+/g, 'ss')                // Special Characters #9
                .replace(/[Ææ]+/g, 'ae')                // Special Characters #10
                .replace(/[Øøœ]+/g, 'oe')            // Special Characters #11
                .replace(/[%]+/g, 'pct')                // Special Characters #12
                .replace(/\-\-+/g, '')                    // Replace multiple - with single ""
                .replace(/\-/g, '')                    // Replace - with single ""
                .replace(/^-+/, '')                    // Trim - from start of text
                .replace(/-+$/, '');            		// Trim - from end of text

        };
    }

    function consultarCep(form) {
        let cep = $(form).find('[name="cep"]').val().replace(/-/g, '').replace(/\./g, '').trim();
        let urlStr = `https://viacep.com.br/ws/${cep}/json/`;
        $.ajax({
            url: urlStr,
            type: "GET",
            dataType: "json",
            success: function (response_endereco) {
                if (response_endereco.logradouro)
                    form.find("[name='rua']").val(response_endereco.logradouro).parent().addClass('active');
                if (response_endereco.uf)
                    form.find("[name='estado']").val(response_endereco.uf).parent().addClass('active');
                if (response_endereco.localidade)
                    form.find("[name='cidade']").val(response_endereco.localidade).parent().addClass('active');
                if (response_endereco.bairro)
                    form.find("[name='bairro']").val(response_endereco.bairro).parent().addClass('active');

                form.find("[name='numero']").focus();
            },
            error: function (erro) {
                toastr.error('Não foi possível localizar automaticamente, por favor, tente novamente ou preencha manualmente.', 'Erro CEP');
            }
        });
    }
</script>

<script>
    /**
     * Function to round decimal fields. If decimal_places is not provided, 2 is used as default
     * @param value the valeu to be rounded
     * @param decimal_places the number of decimal places, if not provided 2 is used as default
     * @returns {string} the formated value
     */
    function formatDecimalNumber(value, decimal_places) {
        if (typeof decimal_places === "undefined") {
            decimal_places = 2;
        }

        var formatedValue = "--"

        if (parseFloat(value).toString() === "NaN" || parseFloat(value).toString() === "undefined") {
        } else {

            formatedValue = parseFloat(value).toLocaleString('pt-BR', {
                minimumFractionDigits: decimal_places,
                maximumFractionDigits: decimal_places
            })
        }

        return formatedValue;
    }
</script>

{% block js %}

{% endblock %}

{% block js_base %}
{% endblock %}

</body>
</html>